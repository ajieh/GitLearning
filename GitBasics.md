# Git基础知识

### 一、Git简介

Git是一款免费开源的分布式版本控制系统，它由Linus创建，拥有庞大的社区支持和活跃的开发者生态，目前广泛应用于软件开发中。Git提供了丰富的命令行工具和图形化界面，包括Git Bash（命令行界面）、Git GUI（图形化界面）以及各种集成开发环境（IDE）中的Git插件。这些工具使开发人员能够轻松地进行版本控制、分支管理和团队协作。

------



### 二、版本控制软件

版本控制软件是一种用于管理和跟踪文件修改历史的工具。它允许多个人或团队在同一个项目上同时进行工作，并记录每个人的修改，以便轻松地进行合并和跟踪更改。

版本控制软件的主要功能包括：

1. 版本控制：它可以跟踪文件的修改历史，记录每个版本的更改内容、作者和时间戳。这使得开发人员可以回滚到以前的版本，恢复文件或了解文件的演变过程。

2. 并发管理：多个人或团队可以在同一个项目上并行工作，版本控制软件可以有效地管理并协调他们的更改，避免冲突和数据丢失。

3. 分支和合并：版本控制软件允许创建分支，即在项目的特定时间点创建一个副本。这使得不同功能或实验性开发可以并行进行，而不会直接影响主要的代码库。分支可以合并回主干代码，保留所有的修改记录。

4. 协作和团队合作：版本控制软件促进了团队协作，允许多个开发人员同时在同一个项目上工作，并且可以轻松地共享和融合彼此的更改。

常见的版本控制软件包括Git、Subversion（SVN）、Mercurial等。这些工具提供了命令行界面和图形化界面，使开发人员能够方便地管理和跟踪文件的版本和更改历史。



### 三、Git基本概念

**Git的“三棵树”：**

- **工作区 (Working Directory):** 可以理解为当前项目的实际文件夹，此区域中的文件并没有被git追踪。
- **暂存区 (Stage)：** 暂存区保存了被Git跟踪的文件的快照或者暂存状态，当工作区项目发生了变更，就提交到暂存区。
- **版本库 (Head):** 它是Git仓库中指向最新提交的指针。每次提交都会生成一个唯一的标识，称为Commit，它包含了当前文件的快照和元数据。

**仓库 (Repository)：** 是Git中用于存储项目所有版本历史记录和相关文件的地方。它是一个包含了项目的所有文件、目录以及每个文件的历史记录的目录。可以分为远程仓库和本地仓库。

**克隆 (Clone)：** 在本地仓库创建一个远程仓库的副本（包括所有的文件、版本历史记录和分支等）。

**推送 (Push)：** 将本地仓库中的改动上传到远程仓库，以便其他开发者可以看到和使用你的修改。

**拉取 (Pull):**  是将远程仓库中的最新代码更新到本地仓库。当其他开发者在远程仓库中提交了一些修改后，你可以使用拉取操作将这些修改同步到你的本地仓库，以便在此基础上继续开发。

**添加 (Add):** 将文件从工作区提交到暂存区。添加操作后，文件的当前状态将被记录在Git的暂存区中，可随后将其提交到本地仓库。

**提交 (Commit)：**提交是指将代码的修改保存到本地仓库，并为这个提交创建一个唯一的SHA标识。这样可以方便地回顾、比较和恢复不同版本之间的代码状态。

**分支 (Branch):**  基于master分支（Git的默认分支）创建，每个分支都代表了代码库的一个版本，可以在不同分支间进行切换，并且可以并行地进行开发工作。

**快照 (Snapshot)：** 指的是提交（commit）的状态。在每次提交之前，Git会将文件的当前状态（包括添加、修改和删除的文件）保存为一个快照。



### 四、Git使用教程

**1、配置用户名和邮箱**

```
$ git config --global user.name "yourname"
$ git config --global user.email "yourname@email.com"
```

可以用下列命令查看信息

```
$ git config user.name
$ git config user.email
```

**2、初始化仓库**

使用git init命令可以将当前目录初始化为一个Git仓库。同时会在当前目录生成一个文件夹 .git 

**注：千万不要删掉.git文件夹！！！**

```
$ git init
```

用下面的命令可以查看当前状态：

```
$ git status
```

**3、将文件添加到暂存区**

如果只是创建了文件，那么该文件不会被Git管理，此时通过git status查看，会发现它在Untracked files里。因此，要想将文件成为Git仓库的管理对象，要使用git add将他加入到暂存区中。

添加指定文件到暂存区:

```
$ git add [文件名]
```

添加当前目录中的所有文件到暂存区：

```
$ git add .
```

添加指定目录中的所有文件到暂存区:

```
$ git add folder/
```

使用通配符添加匹配的文件到暂存区：

```
$ git add *.txt
```

**4、提交修改**

通过git commit命令可以把当前暂存区的文件保存到本地仓库, -m参数后是对这个提交的描述信息。

```
$ git commit -m "提交信息"
```

**5、查看提交日志**

通过git log命令可以查看仓库中提交的日志。

```
$ git log
```

查看每个提交的简略信息（一行显示一个提交）：

```
$ git log --oneline
```

查看指定文件的修改历史记录：

```
$ git log --[文件名]
```

查看以图形方式展示的提交历史记录：

```
$ git log --graph
```

**6、查看更改前后的差别**

用git diff命令可以查看当前未暂存的文件与最后一次提交（或指定提交）之间的差异。

工作区和暂存区之间的差异，多个文件比对：

```
$ git diff
```

指定文件比对：

```
$ git diff [文件名]
```

暂存区和本地库之间的差异：

```
$ git diff HEAD [文件名]
```

显示有多少行发生变化，简洁展示：

```
$ git diff  --stat
```

**7、分支操作**

显示当前分支名

```
$ git branch
```

创建新的分支

```
$ git branch [分支名]
```

表示核查工作区相对于版本库修改过的文件

```
$ git checkout
```

切换到对应的分支

```
$ git checkout [分支名] 
```

表示以当前分支为基础创建新的分支并切换到该分支

```
$ git checkout -b [分支名]
```

切换到上一个分支

```
$ git checkout -
```

删除分支

```
$ git branch -d [分支名]
```

**8、合并分支**

将指定分支合并到当前分支

```
$ git merge [分支名]
```

添加`--no-ff`参数，意味着禁止快进式合并（即默认的-ff合并，当要合并的分支与目标分支的历史之间没有分叉时，合并的时候Git只需移动分支指针，将它们指向目标分支的最新提交，而无需创建新的合并提交。这样的合并没有明确的合并历史，很难追踪各个分支的合并点）,Git会强制创建一个新的合并提交, 这能保留合并前分支的历史信息。

```
$ git merge --no-ff [分支名]
```

--squash参数将要合并的分支的提交记录压缩成一个单独的提交，并将这个合并提交添加到当前分支，从而保持提交历史的简洁性。

```
$ git merge --squash [分支名]
```

